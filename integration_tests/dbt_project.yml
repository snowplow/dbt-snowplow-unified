name: snowplow_unified_integration_tests
version: 0.5.5
config-version: 2
profile: integration_tests
dispatch:
  - macro_namespace: dbt
    search_order:
      - snowplow_utils
      - dbt
model-paths:
  - models
analysis-paths:
  - analysis
test-paths:
  - tests
seed-paths:
  - data
macro-paths:
  - macros
clean-targets:
  - target
  - dbt_modules
  - dbt_packages
quoting:
  identifier: false
  schema: false
models:
  snowplow_unified_integration_tests:
    +materialized: table
    +schema: snplw_unified_int_tests
    source:
      bigquery:
        +enabled: "{{ target.type == 'bigquery' | as_bool() }}"
      databricks:
        +enabled: "{{ (target.type in ['databricks']) | as_bool() }}"
      default:
        +enabled: "{{ (target.type in ['redshift', 'postgres']) | as_bool() }}"
      snowflake:
        +enabled: "{{ target.type == 'snowflake' | as_bool() }}"
      spark:
        +enabled: "{{ target.type == 'spark' | as_bool() }}"
    +bind: false
vars:
  snowplow_unified:
    snowplow__allow_null_dvce_tstamps: true
    snowplow__atomic_schema: "{{target.schema ~ '_snplw_unified_int_tests'}}"
    snowplow__events_table: snowplow_unified_events_stg
    snowplow__events: "{{ ref('snowplow_unified_events_stg') }}"
    snowplow__enable_web: true
    snowplow__enable_mobile: true
    snowplow__yauaa_context: snowplow_unified_yauaa_context_stg
    snowplow__conversion_stitching: false
    snowplow__cwv_events: snowplow_unified_cwv_stg
    snowplow__page_view_context: snowplow_unified_page_view_context_stg
    snowplow__cmp_visible_events: snowplow_unified_consent_cmp_visible_stg
    snowplow__consent_preferences_events: snowplow_unified_consent_preferences_stg
    snowplow__iab_context: snowplow_unified_spider_context_stg
    snowplow__ua_parser_context: snowplow_unified_ua_context_stg
    snowplow__browser_context: snowplow_unified_browser_context_stg
    snowplow__browser_context_2: snowplow_unified_browser_context_2_stg
    snowplow__screen_view_events: snowplow_unified_screen_view_event_stg
    snowplow__session_context: snowplow_unified_session_context_stg
    snowplow__geolocation_context: snowplow_unified_geolocation_context_stg
    snowplow__mobile_context: snowplow_unified_mobile_context_stg
    snowplow__application_context: snowplow_unified_app_context_stg
    snowplow__screen_context: snowplow_unified_screen_context_stg
    snowplow__deep_link_context: snowplow_unified_deep_link_context_stg
    snowplow__application_error_events: snowplow_unified_app_error_event_stg
    snowplow__screen_summary_context: snowplow_unified_screen_summary_context_stg
    snowplow__start_date: '2020-07-03'
    snowplow__backfill_limit_days: 2
    snowplow__databricks_catalog: hive_metastore
    snowplow__enable_iab: true
    snowplow__enable_ua: true
    snowplow__enable_yauaa: true
    snowplow__view_stitching: true
    snowplow__view_passthroughs:
      - v_collector
      - sql: event_id
        alias: event_id2
    snowplow__session_passthroughs:
      - event_id
      - sql: event_id
        alias: event_id2
    snowplow__user_first_passthroughs:
      - event_id
      - sql: event_id2 || '-first'
        alias: first_event_id2
    snowplow__user_last_passthroughs:
      - event_id
      - sql: event_id2 || '-last'
        alias: last_event_id2
    snowplow__view_aggregations:
      - type: count
        field: case when event_name = 'page_view' then 1 else null end
        alias: agg_test
    snowplow__session_aggregations:
      - type: count
        field: case when event_name = 'page_view' then 1 else null end
        alias: agg_test
    snowplow__user_aggregations:
      - type: sum
        field: agg_test
        alias: agg_test
    snowplow__enable_browser_context: true
    snowplow__enable_browser_context_2: false
    snowplow__enable_mobile_context: true
    snowplow__enable_geolocation_context: true
    snowplow__enable_application_context: true
    snowplow__enable_screen_context: true
    snowplow__enable_app_errors: true
    snowplow__enable_deep_link_context: true
    snowplow__enable_initial_checks: false
    snowplow__license_accepted: true
  snowplow__enable_consent: true
  snowplow__enable_cwv: true
  snowplow__enable_screen_summary_context: false
  snowplow__conversion_events:
    - name: view_page
      condition: event_name = 'page_view'
      list_events: true
      value: tr_total_base
      default_value: 0.5
  snowplow__total_all_conversions: true
  snowplow__list_event_counts: true
seeds:
  snowplow_unified_integration_tests:
    +schema: snplw_unified_int_tests
    source:
      snowplow_unified_events:
        +column_types:
          app_id: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          etl_tstamp: timestamp
          collector_tstamp: timestamp
          dvce_created_tstamp: timestamp
          user_fingerprint: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ip_isp: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ip_organization: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ip_domain: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ip_netspeed: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          page_urlfragment: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_urlfragment: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_medium: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_source: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_term: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mkt_term: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mkt_content: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          se_label: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          se_property: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          se_value: float
          tr_orderid: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          tr_affiliation: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          tr_total: float
          tr_tax: float
          tr_shipping: float
          tr_city: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          tr_state: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          tr_country: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ti_orderid: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ti_sku: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ti_name: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ti_category: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ti_price: float
          br_name: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_type: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_renderengine: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_colordepth: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          os_name: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          os_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          os_manufacturer: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          dvce_type: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          dvce_ismobile: boolean
          tr_currency: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          tr_total_base: "{{ 'decimal(9,1)' if target.type in ['databricks', 'spark'] else 'float' }}"
          tr_tax_base: float
          tr_shipping_base: float
          ti_currency: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ti_price_base: float
          base_currency: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          etl_tags: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          dvce_sent_tstamp: timestamp
          refr_domain_userid: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_dvce_tstamp: timestamp
          derived_tstamp: timestamp
          true_tstamp: timestamp
          load_tstamp: timestamp
          contexts_com_snowplowanalytics_snowplow_client_session_1_0_0: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar(65535)' }}"
          unstruct_event_com_snowplowanalytics_mobile_screen_view_1_0_0: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar(65535)' }}"
          contexts_com_snowplowanalytics_snowplow_geolocation_context_1_0_0: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar(65535)' }}"
      snowplow_unified_web_vital_events:
        +column_types:
          app_id: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          etl_tstamp: timestamp
          collector_tstamp: timestamp
          dvce_created_tstamp: timestamp
          user_fingerprint: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ip_isp: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ip_organization: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ip_domain: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ip_netspeed: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          page_urlfragment: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_urlfragment: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_medium: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_source: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_term: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mkt_term: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mkt_content: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          se_label: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          se_property: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          se_value: float
          tr_orderid: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          tr_affiliation: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          tr_total: float
          tr_tax: float
          tr_shipping: float
          tr_city: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          tr_state: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          tr_country: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ti_orderid: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ti_sku: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ti_name: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ti_category: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ti_price: float
          br_name: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_type: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_renderengine: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_colordepth: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          os_name: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          os_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          os_manufacturer: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          dvce_type: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          dvce_ismobile: boolean
          tr_currency: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          tr_total_base: float
          tr_tax_base: float
          tr_shipping_base: float
          ti_currency: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ti_price_base: float
          base_currency: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          etl_tags: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          dvce_sent_tstamp: timestamp
          refr_domain_userid: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_dvce_tstamp: timestamp
          derived_tstamp: timestamp
          true_tstamp: timestamp
          load_tstamp: timestamp
          event_name: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          user_id: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mkt_source: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_lang: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mkt_medium: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mkt_campaign: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          unstruct_event_com_snowplowanalytics_snowplow_consent_preferences_1_0_0: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          unstruct_event_com_snowplowanalytics_snowplow_cmp_visible_1_0_0: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
      snowplow_unified_screen_engagement_events:
        +column_types:
          app_id: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          etl_tstamp: timestamp
          collector_tstamp: timestamp
          dvce_created_tstamp: timestamp
          domain_sessionid: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          domain_userid: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mkt_source: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_lang: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mkt_medium: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mkt_campaign: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          user_fingerprint: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ip_isp: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ip_organization: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ip_domain: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ip_netspeed: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          page_url: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          page_urlfragment: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          page_urlquery: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          user_id: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          geo_country: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          page_title: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          page_referrer: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_urlfragment: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_medium: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_source: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_term: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mkt_term: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mkt_content: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          se_label: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          se_property: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          se_value: float
          tr_orderid: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          tr_affiliation: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          tr_total: float
          tr_tax: float
          tr_shipping: float
          tr_city: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          tr_state: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          tr_country: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ti_orderid: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ti_sku: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ti_name: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ti_category: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ti_price: float
          br_name: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_type: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_renderengine: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_colordepth: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          os_name: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          os_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          os_manufacturer: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          dvce_type: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          dvce_ismobile: boolean
          tr_currency: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          tr_total_base: "{{ 'decimal(9,1)' if target.type in ['databricks', 'spark'] else 'float' }}"
          tr_tax_base: float
          tr_shipping_base: float
          ti_currency: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ti_price_base: float
          base_currency: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          etl_tags: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          dvce_sent_tstamp: timestamp
          refr_domain_userid: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_device_tstamp: timestamp
          derived_tstamp: timestamp
          true_tstamp: timestamp
          load_tstamp: timestamp
          unstruct_event_com_snowplowanalytics_mobile_screen_view_1_0_0: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar(65535)' }}"
          contexts_com_snowplowanalytics_snowplow_client_session_1_0_2: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar(65535)' }}"
          contexts_com_snowplowanalytics_snowplow_mobile_context_1_0_3: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar(65535)' }}"
          contexts_com_snowplowanalytics_mobile_application_1_0_0: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar(65535)' }}"
          contexts_com_snowplowanalytics_mobile_screen_1_0_0: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar(65535)' }}"
          contexts_com_snowplowanalytics_mobile_screen_summary_1_0_0: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar(65535)' }}"
      snowplow_unified_consent_preferences:
        +column_types:
          root_id: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          root_tstamp: timestamp
          basis_for_processing: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          consent_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          consent_scopes: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          consent_url: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          domains_applied: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          event_type: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          gdpr_applies: boolean
      snowplow_unified_consent_cmp_visible:
        +column_types:
          root_id: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          root_tstamp: timestamp
          elapsed_time: float
      snowplow_unified_spider_context:
        +enabled: "{{ (target.type in ['redshift', 'postgres']) | as_bool() }}"
      snowplow_unified_ua_context:
        +enabled: "{{ (target.type in ['redshift', 'postgres']) | as_bool() }}"
      snowplow_unified_yauaa_context:
        +enabled: "{{ (target.type in ['redshift', 'postgres']) | as_bool() }}"
    expected:
      snowplow_unified_consent_versions_expected:
        +column_types:
          consent_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          version_start_tstamp: timestamp
          consent_scopes: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          consent_url: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          domains_applied: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          is_latest_version: boolean
          last_allow_all_event: timestamp
      snowplow_unified_consent_scope_status_expected:
        +column_types:
          scope: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          total_consent: integer
      snowplow_unified_consent_totals_expected:
        +column_types:
          consent_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          version_start_tstamp: timestamp
          consent_scopes: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          consent_url: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          domains_applied: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          is_latest_version: boolean
          last_allow_all_event: timestamp
          total_visitors: integer
          allow_all: integer
          allow_selected: integer
          allow: integer
          pending: integer
          denied: integer
          expired: integer
          withdrawn: integer
          implicit_consent: integer
          expires_in_six_months: integer
      snowplow_unified_consent_cmp_stats_expected:
        +column_types:
          event_id: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          user_identifier: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          view_id: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          session_identifier: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          cmp_load_time: float
          cmp_tstamp: timestamp
          first_consent_event_tstamp: timestamp
          first_consent_event_type: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          cmp_interaction_time: float
      snowplow_unified_users_expected:
        +column_types:
          start_tstamp: timestamp
          end_tstamp: timestamp
          first_page_urlfragment: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          last_page_urlfragment: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          last_page_urlquery: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_urlquery: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_urlfragment: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_medium: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_source: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_term: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mkt_term: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mkt_content: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mobile__total_storage: "{{ 'bigint' if target.type in ['postgres', 'spark', 'databricks', 'redshift'] else 'integer' }}"
          mobile__available_storage: "{{ 'bigint' if target.type in ['postgres', 'spark', 'databricks', 'redshift'] else 'integer' }}"
      snowplow_unified_consent_users_expected:
        +column_types:
          user_identifier: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          user_id: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          geo_country: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          cmp_events: integer
          consent_events: integer
          last_cmp_event_tstamp: timestamp
          last_consent_event_tstamp: timestamp
          last_consent_event_type: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          last_consent_scopes: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          last_consent_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          last_consent_url: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          last_domains_applied: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          last_processed_event: timestamp
          is_latest_version: boolean
      snowplow_unified_consent_log_expected:
        +column_types:
          event_id: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          user_identifier: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          user_id: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          geo_country: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          view_id: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          session_identifier: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          derived_tstamp: timestamp
          load_tstamp: timestamp
          event_name: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          event_type: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          basis_for_processing: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          consent_url: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          consent_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          consent_scopes: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          domains_applied: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          gdpr_applies: boolean
          cmp_load_time: float
      snowplow_unified_views_expected:
        +column_types:
          app_id: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          horizontal_percentage_scrolled: float
          vertical_percentage_scrolled: float
          dvce_created_tstamp: timestamp
          collector_tstamp: timestamp
          derived_tstamp: timestamp
          start_tstamp: timestamp
          end_tstamp: timestamp
          page_urlfragment: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mkt_term: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mkt_content: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_urlfragment: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_medium: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_source: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          refr_term: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_colordepth: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          br_renderengine: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          iab__category: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          iab__primary_impact: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          iab__reason: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"          
          yauaa__device_class: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          yauaa__agent_class: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          yauaa__agent_name: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          yauaa__agent_name_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          yauaa__agent_name_version_major: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          yauaa__device_brand: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          yauaa__device_name: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          yauaa__device_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          yauaa__layout_engine_class: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          yauaa__layout_engine_name: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          yauaa__layout_engine_name_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          yauaa__layout_engine_name_version_major: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          yauaa__operating_system_class: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          yauaa__operating_system_name: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          yauaa__operating_system_name_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          yauaa__operating_system_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          geo_longitude: "{{ 'double' if target.type in ['databricks', 'spark'] else 'float' }}"
          geo_latitude: "{{ 'double' if target.type in ['databricks', 'spark'] else 'float' }}"
          mobile__scale: float
          absolute_time_in_s: float
          geo__altitude: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
          geo__altitude_accuracy: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
          geo__bearing: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
          geo__latitude: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
          geo__latitude_longitude_accuracy: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
          geo__longitude: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
          geo__speed: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
          mobile__low_power_mode: boolean
          mobile__is_portrait: boolean
          iab__spider_or_robot: boolean
          stitched_user_id: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mobile__total_storage: "{{ 'bigint' if target.type in ['postgres', 'spark', 'databricks', 'redshift'] else 'integer' }}"
          mobile__os_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          mobile__available_storage: "{{ 'bigint' if target.type in ['postgres', 'spark', 'databricks', 'redshift'] else 'integer' }}"
          yauaa__agent_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          yauaa__agent_version_major: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          yauaa__layout_engine_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          yauaa__layout_engine_version_major: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ua__useragent_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ua__useragent_major: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ua__useragent_minor: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ua__useragent_patch: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ua__useragent_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ua__os_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ua__os_major: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ua__os_minor: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ua__os_patch: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ua__os_patch_minor: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ua__os_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
          ua__device_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
      bigquery:
        +enabled: "{{ target.type == 'bigquery' | as_bool() }}"
        snowplow_unified_sessions_expected:
          +column_types:
            app_id: string
            start_tstamp: timestamp
            end_tstamp: timestamp
            first_page_urlfragment: string
            last_page_urlfragment: string
            refr_urlquery: string
            refr_urlfragment: string
            refr_medium: string
            refr_source: string
            refr_term: string
            mkt_term: string
            mkt_content: string
            br_renderengine: string
            iab__category: string
            iab__primary_impact: string
            iab__reason: string
            iab__spider_or_robot: boolean
            yauaa__device_class: string
            yauaa__agent_class: string
            yauaa__agent_name: string
            yauaa__agent_name_version: string
            yauaa__agent_name_version_major: string
            yauaa__agent_version: string
            yauaa__agent_version_major: string
            yauaa__device_brand: string
            yauaa__device_name: string
            yauaa__device_version: string
            yauaa__layout_engine_class: string
            yauaa__layout_engine_name: string
            yauaa__layout_engine_name_version: string
            yauaa__layout_engine_name_version_major: string
            yauaa__layout_engine_version: string
            yauaa__layout_engine_version_major: string
            yauaa__operating_system_class: string
            yauaa__operating_system_name: string
            yauaa__operating_system_name_version: string
            yauaa__operating_system_version: string
            cv_view_page_volume: integer
            cv_view_page_total: float
            cv_view_page_first_conversion: timestamp
            cv_view_page_converted: boolean
            mobile__total_storage: "{{ 'bigint' if target.type in ['postgres', 'spark', 'databricks', 'redshift'] else 'integer' }}"
            mobile__os_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            mobile__available_storage: "{{ 'bigint' if target.type in ['postgres', 'spark', 'databricks', 'redshift'] else 'integer' }}"
            ua__useragent_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__useragent_major: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__useragent_minor: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__useragent_patch: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__useragent_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_major: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_minor: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_patch: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_patch_minor: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__device_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
      spark:
        +enabled: "{{ target.type == 'spark' | as_bool() }}"
        snowplow_unified_web_vital_measurements_expected:
          +column_types:
            lcp_75p: decimal(19,4)
            fid_75p: decimal(19,4)
            cls_75p: decimal(19,4)
            ttfb_75p: decimal(19,4)
            inp_75p: decimal(19,4)
        snowplow_unified_sessions_expected:
          +column_types:
            app_id: string
            start_tstamp: timestamp
            end_tstamp: timestamp
            first_page_urlfragment: string
            last_page_urlfragment: string
            refr_urlquery: string
            refr_urlfragment: string
            refr_medium: string
            refr_source: string
            refr_term: string
            mkt_term: string
            mkt_content: string
            br_renderengine: string
            iab__category: string
            iab__primary_impact: string
            iab__reason: string
            iab__spider_or_robot: boolean
            os_version: string
            yauaa__device_class: string
            yauaa__agent_class: string
            yauaa__agent_name: string
            yauaa__agent_name_version: string
            yauaa__agent_name_version_major: string
            yauaa__agent_version: string
            yauaa__agent_version_major: string
            yauaa__device_brand: string
            yauaa__device_name: string
            yauaa__device_version: string
            yauaa__layout_engine_class: string
            yauaa__layout_engine_name: string
            yauaa__layout_engine_name_version: string
            yauaa__layout_engine_name_version_major: string
            yauaa__layout_engine_version: string
            yauaa__layout_engine_version_major: string
            yauaa__operating_system_class: string
            yauaa__operating_system_name: string
            yauaa__operating_system_name_version: string
            yauaa__operating_system_version: string
            cv_view_page_volume: integer
            cv_view_page_total: decimal(9, 1)
            cv_view_page_first_conversion: timestamp
            cv_view_page_converted: boolean
            mobile__os_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            mobile__available_storage: "{{ 'bigint' if target.type in ['postgres', 'spark', 'databricks', 'redshift'] else 'integer' }}"
            ua__useragent_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__useragent_major: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__useragent_minor: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__useragent_patch: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__useragent_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_major: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_minor: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_patch: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_patch_minor: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__device_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            geo_longitude: "{{ 'double' if target.type in ['databricks', 'spark'] else 'float' }}"
            geo_latitude: "{{ 'double' if target.type in ['databricks', 'spark'] else 'float' }}"
            first_geo__altitude: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
            first_geo__altitude_accuracy: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
            first_geo__bearing: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
            first_geo__latitude: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
            first_geo__latitude_longitude_accuracy: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
            first_geo__longitude: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
            first_geo__speed: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
      databricks:
        +enabled: "{{ (target.type in ['databricks']) | as_bool() }}"
        snowplow_unified_web_vital_measurements_expected:
          +column_types:
            lcp_75p: decimal(19,3)
            fid_75p: decimal(19,3)
            cls_75p: decimal(19,3)
            ttfb_75p: decimal(19,3)
            inp_75p: decimal(19,3)
        snowplow_unified_sessions_expected:
          +column_types:
            app_id: string
            start_tstamp: timestamp
            end_tstamp: timestamp
            first_page_urlfragment: string
            last_page_urlfragment: string
            refr_urlquery: string
            refr_urlfragment: string
            refr_medium: string
            refr_source: string
            refr_term: string
            mkt_term: string
            mkt_content: string
            br_renderengine: string
            iab__category: string
            iab__primary_impact: string
            iab__reason: string
            iab__spider_or_robot: boolean
            os_version: string
            yauaa__device_class: string
            yauaa__agent_class: string
            yauaa__agent_name: string
            yauaa__agent_name_version: string
            yauaa__agent_name_version_major: string
            yauaa__agent_version: string
            yauaa__agent_version_major: string
            yauaa__device_brand: string
            yauaa__device_name: string
            yauaa__device_version: string
            yauaa__layout_engine_class: string
            yauaa__layout_engine_name: string
            yauaa__layout_engine_name_version: string
            yauaa__layout_engine_name_version_major: string
            yauaa__layout_engine_version: string
            yauaa__layout_engine_version_major: string
            yauaa__operating_system_class: string
            yauaa__operating_system_name: string
            yauaa__operating_system_name_version: string
            yauaa__operating_system_version: string
            cv_view_page_volume: integer
            cv_view_page_total: decimal(9, 1)
            cv_view_page_first_conversion: timestamp
            cv_view_page_converted: boolean
            mobile__os_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            mobile__available_storage: "{{ 'bigint' if target.type in ['postgres', 'spark', 'databricks', 'redshift'] else 'integer' }}"
            ua__useragent_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__useragent_major: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__useragent_minor: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__useragent_patch: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__useragent_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_major: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_minor: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_patch: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_patch_minor: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__device_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            geo_longitude: "{{ 'double' if target.type in ['databricks', 'spark'] else 'float' }}"
            geo_latitude: "{{ 'double' if target.type in ['databricks', 'spark'] else 'float' }}"
            geo__altitude: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
            geo__altitude_accuracy: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
            geo__bearing: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
            geo__latitude: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
            geo__latitude_longitude_accuracy: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
            geo__longitude: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
            geo__speed: "{{ 'double' if target.type in ['spark', 'databricks'] else 'float' }}"
      default:
        +enabled: "{{ (target.type in ['redshift', 'postgres']) | as_bool() }}"
        snowplow_unified_sessions_expected:
          +column_types:
            app_id: varchar
            start_tstamp: timestamp
            end_tstamp: timestamp
            first_page_urlfragment: varchar
            last_page_urlfragment: varchar
            refr_urlquery: varchar
            refr_urlfragment: varchar
            refr_medium: varchar
            refr_source: varchar
            refr_term: varchar
            mkt_term: varchar
            mkt_content: varchar
            last_page_urlquery: varchar
            br_renderengine: varchar
            iab__category: varchar
            iab__primary_impact: varchar
            iab__reason: varchar
            iab__spider_or_robot: boolean
            os_version: varchar
            yauaa__device_class: varchar
            yauaa__agent_class: varchar
            yauaa__agent_name: varchar
            yauaa__agent_name_version: varchar
            yauaa__agent_name_version_major: varchar
            yauaa__agent_version: varchar
            yauaa__agent_version_major: varchar
            yauaa__device_brand: varchar
            yauaa__device_name: varchar
            yauaa__device_version: varchar
            yauaa__layout_engine_class: varchar
            yauaa__layout_engine_name: varchar
            yauaa__layout_engine_name_version: varchar
            yauaa__layout_engine_name_version_major: varchar
            yauaa__layout_engine_version: varchar
            yauaa__layout_engine_version_major: varchar
            yauaa__operating_system_class: varchar
            yauaa__operating_system_name: varchar
            yauaa__operating_system_name_version: varchar
            yauaa__operating_system_version: varchar
            cv_view_page_first_conversion: timestamp
            mobile__total_storage: "{{ 'bigint' if target.type in ['postgres', 'spark', 'databricks', 'redshift'] else 'integer' }}"
            mobile__os_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            mobile__available_storage: "{{ 'bigint' if target.type in ['postgres', 'spark', 'databricks', 'redshift'] else 'integer' }}"
            ua__useragent_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__useragent_major: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__useragent_minor: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__useragent_patch: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__useragent_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_major: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_minor: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_patch: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_patch_minor: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__os_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            ua__device_family: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
      snowflake:
        +enabled: "{{ target.type == 'snowflake' | as_bool() }}"
        snowplow_unified_sessions_expected:
          +column_types:
            app_id: varchar
            start_tstamp: timestamp
            end_tstamp: timestamp
            is_engaged: boolean
            first_page_urlfragment: varchar
            last_page_urlfragment: varchar
            refr_urlquery: varchar
            refr_urlfragment: varchar
            refr_medium: varchar
            refr_source: varchar
            refr_term: varchar
            mkt_term: varchar
            mkt_content: varchar
            last_page_urlquery: varchar
            br_renderengine: varchar
            iab__category: varchar
            iab__primary_impact: varchar
            iab__reason: varchar
            iab__spider_or_robot: boolean
            os_version: varchar
            yauaa__device_class: varchar
            yauaa__agent_class: varchar
            yauaa__agent_name: varchar
            yauaa__agent_name_version: varchar
            yauaa__agent_name_version_major: varchar
            yauaa__agent_version: varchar
            yauaa__agent_version_major: varchar
            yauaa__device_brand: varchar
            yauaa__device_name: varchar
            yauaa__device_version: varchar
            yauaa__layout_engine_class: varchar
            yauaa__layout_engine_name: varchar
            yauaa__layout_engine_name_version: varchar
            yauaa__layout_engine_name_version_major: varchar
            yauaa__layout_engine_version: varchar
            yauaa__layout_engine_version_major: varchar
            yauaa__operating_system_class: varchar
            yauaa__operating_system_name: varchar
            yauaa__operating_system_name_version: varchar
            yauaa__operating_system_version: varchar
            cv_view_page_volume: integer
            cv_view_page_total: float
            cv_view_page_first_conversion: timestamp
            cv_view_page_converted: boolean
            mobile__os_version: "{{ 'string' if target.type in ['bigquery', 'databricks', 'spark'] else 'varchar' }}"
            mobile__available_storage: "{{ 'bigint' if target.type in ['postgres', 'spark', 'databricks', 'redshift'] else 'integer' }}"
  +quote_columns: false
tests:
  +store_failures: "{{ var('store_failures', false) }}"
flags:
  require_generic_test_arguments_property: true
  send_anonymous_usage_stats: False
  use_colors: True
